| {% extends 'layout.html' %}

| {% block og %}
meta(property="og:title", content="{% if user %}{{user.name}}{% elif title == 'open-projects' %}Open Projects{% elif title == 'training' %}Training{% endif %}")
// XXX - Replace with actual url
meta(property="og:url", content="https://cloud.blender.org")
meta(property="og:type", content="website")
| {% endblock %}

| {% block tw %}
meta(name="twitter:card", content="summary_large_image")
meta(name="twitter:site", content="@Blender_Cloud")
meta(name="twitter:title", content="{% if user %}{{user.name}}{% elif title == 'open-projects' %}Open Projects{% elif title == 'training' %}Training{% endif %} on Blender Cloud")
meta(name="twitter:description", content="{% if user %}{{user.description}}{% elif title == 'open-projects' %}Full production data and tutorials from all open movies, for you to use freely.{% elif title == 'training' %}Production quality training videos by 3D professionals.{% endif %}")
meta(name="twitter:image", content="{% if title == 'open-projects' %}{{ url_for('static', filename='assets/img/background_join_bbb.jpg')}}{% elif title == 'training' %}{{ url_for('static', filename='assets/img/background_join_peoplecodingblender.jpg')}}{% endif %}")
| {% endblock %}

| {% block page_title %}
| {% if user %}{{user.name}}{% elif title == 'open-projects' %}Open Projects{% elif title == 'training' %}Training{% endif %}
| {% endblock %}

| {% block header_backdrop %}
.navbar-backdrop(
	style="{% if title == 'open-projects' %}background-image: url({{ url_for('static', filename='assets/img/background_join_bbb.jpg')}}){% elif title == 'training' %}background-image: url({{ url_for('static', filename='assets/img/background_join_peoplecodingblender.jpg')}}){% endif %}")
.navbar-backdrop-overlay(class="{% if user %}homepage{% endif %}")
| {% endblock %}

| {% block body %}

#project_container

	#node_index-container

		| {% if user %}
		#node_index-header.user
			#node_index-user-avatar
				img(src="{{ user.gravatar }}")
			#node_index-user-info
				.node_index-user-name {{user.name}}
				.node_index-user-description {{user.description}}
		| {% endif %}

		| {% if title == 'open-projects' %}
		#node_index-header.collection
			#node_index-collection-info
				.node_index-collection-name Open Projects
				.node_index-collection-description.
					Full production data and tutorials from all open movies, for you to use freely.

		| {% elif title == 'training' %}
		#node_index-header.collection
			#node_index-collection-info
				.node_index-collection-name Training
				.node_index-collection-description.
					Production quality training videos by 3D professionals.
		| {% endif %}


		#node_index-collection-container
			.node_index-collection

				| {% for project in projects %}
				| {% if project.properties.status == 'published' %}
				.node_index-collection-card-container
					.node_index-collection-card
						a.item-header(
							href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")

							.overlay
							img.background(src="{{ project.properties.picture_header.thumbnail('m') }}")

						a.card-thumbnail(
							href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")

							img.thumb(src="{{ project.properties.picture_square.thumbnail('m') }}")

						.item-info

							a.item-title(
								href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")
								| {{project.name}}


							| {% if project.properties.summary %}
							p.item-description
								| {{project.properties.summary|safe}}
							| {% endif %}
				| {% elif project.properties.status == 'pending' and current_user.is_authenticated() and current_user.has_role('admin') %}
				.node_index-collection-card-container
					.node_index-collection-card
						a.item-header(
							href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")

							.overlay
							img.background(src="{{ project.properties.picture_header.thumbnail('m') }}")

						a.card-thumbnail(
							href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")

							img.thumb(src="{{ project.properties.picture_square.thumbnail('m') }}")

						.item-info

							a.item-title(
								href="{{ url_for('project_view', name='bi', project=project.properties.url) }}")
								| {{project.name}}
								small  (pending)


							| {% if project.properties.summary %}
							p.item-description
								| {{project.properties.summary|safe}}
							| {% endif %}

				| {% endif %}
				| {% endfor %}

| {% endblock %}
