$search-hit-width: 160px
$search-hit-width_list: 48px

#search-overlay
	position: absolute
	top: 0
	left: 0
	right: 0
	bottom: 0
	width: 100%
	height: 100%
	pointer-events: none
	visibility: hidden
	opacity: 0
	z-index: 15
	transition: opacity 150ms ease-in-out

	&.active
		opacity: 1
		visibility: visible
		background-color: rgba($color-background-nav, .7)

.search-input
	position: relative
	float: left
	margin-right: 15px

	.advanced
		opacity: 0
		width: 100%
		height: 15px
		font-size: .75em
		position: absolute
		bottom: -18px
		left: 5px
		z-index: 101
		transition: opacity 100ms ease-in-out
		a
			color: $color-text-dark-secondary

			&:hover
				color: $color-primary-dark
		&.active
			opacity: 1
			pointer-events: initial


	.search-icon
		position: absolute
		color: white
		font-size: 1.1em
		top: 15px
		right: -8px
		cursor: pointer

	#cloud-search, .tt-hint
		background: transparent
		width: 100%
		border: none
		outline: none
		border:
			bottom: 3px solid transparent
			radius: 0
		font:
			size: 1.2em
			weight: 400
			family: $font-body
		margin: 0 0 0 10px
		padding: 0 25px 0 0
		min-height: 50px
		color: white
		+text-overflow-ellipsis
		transition: border 100ms ease-in-out

		&:focus
			border-bottom: 3px solid $color-primary-dark
			outline: none

		&::placeholder
			color: rgba(white, .3)
			transition: color 150ms ease-in-out

		&:hover
			&::placeholder
				color: rgba(white, .6)


.search-site-result
	width: 100%
	.search-hit
		padding: 0
		margin: 0
		display: block
		color: $color-text
		text:
			transform: initial
			shadow: none
		font:
			size: .9em
			weight: 400
			family: $font-body
			style: initial
		width: 100%
		+text-overflow-ellipsis
		+clearfix

		& em
			color: $color-primary-dark
			font-style: normal

		&:hover
			padding: 0
			margin: 0
			background: $color-background

		&:first-child
			border: none

		.search-hit-name
			top: 6px
			margin: 0
			padding-top: 0

		.search-hit-meta
			padding-top: 8px
			margin: 0

		.search-hit-thumbnail
			border-radius: 0
			transition: margin-right 100ms ease-in-out

.twitter-typeahead

	.tt-hint
		color: $color-text-light-hint

	.tt-menu
		background-color: white
		box-shadow: 1px 1px 0 rgba(black, .05), 0 20px 50px rgba(black, .25)
		min-width: 350px
		border-bottom-left-radius: 3px
		border-bottom-right-radius: 3px
		overflow: hidden
		border-top: 20px solid white

		.tt-suggestion
			&:hover, &.tt-cursor
				.search-hit
					text-decoration: none
					background-color: lighten($color-background, 3%)
				.search-hit-name
					color: $color-background-nav

				.search-hit-meta
					span.project, span.node_type, span.media
						color: $color-background-nav

				.search-hit-thumbnail
					opacity: .9
					margin-right: 15px

			&.tt-cursor:hover .search-hit
				background-color: lighten($color-background, 5%)

#search-container
	background-color: white
	display: flex
	border-radius: 0

	+container-behavior

	+media-lg
		border-top-left-radius: 3px
		border-top-right-radius: 3px
		padding-left: 0
		padding-right: 0

	#search-sidebar
		background-color: $color-background-nav
		width: 20%
		+media-lg
			border-top-left-radius: 3px

		input.search-field
			background-color: darken($color-background-nav, 5%)
			font-size: 1.1em
			color: white
			margin-bottom: 10px
			border: 2px solid transparent
			border-bottom-color: rgba($color-primary, .2)
			border-radius: 0
			width: 100%
			padding: 5px 15px
			height: 45px
			transition: border 100ms ease-in-out

			+media-lg
				border-top-left-radius: 3px

			&::placeholder
				color: lighten($color-background-nav, 20%)
			&:placeholder-shown
				border-bottom-color: $color-primary

			&:focus
				outline: none
				border: 2px solid transparent
				border-bottom-color: lighten($color-primary, 5%)

		.search-list-filters
			padding:
				left: 15px
				right: 15px

			.panel.panel-default
				margin-bottom: 10px
				border-radius: 3px
				border: none
				background-color: lighten($color-background-nav, 5%)
			.toggleRefine
				display: block
				padding-left: 7px
				color: $color-text-light-primary
				text-transform: capitalize

				&:hover
					text-decoration: none
					color: $color-primary

				&.refined
					color: $color-primary

					&:hover
						color: $color-danger

						span
							&:before
								content: '\e84a'
								font-family: 'pillar-font'
					span
						&:before
							content: '\e849'
							font-family: 'pillar-font'
							position: relative
							left: -7px
							font-size: .9em

				span
					&:before
						content: '\e848'
						font-family: 'pillar-font'
						position: relative
						left: -7px
						font-size: .9em
			.facet_count
				color: $color-text-light-secondary


			.panel-title, .panel-heading
				color: $color-text-light-primary
				text-decoration: none
				&:hover, &:active, &:focus
					text-decoration: none

			.panel-body
				padding-top: 0

		.search-list-stats
			color: lighten($color-background-nav, 30%)
			padding: 10px 15px 0 15px
			text-align: center
			font-size: .9em
			+clearfix

		#pagination
			ul.search-pagination
				text-align: center
				list-style-type: none
				margin: 0
				padding: 0 10px
				width: 100%
				+clearfix

				li
					float: left
					margin: 3px auto

					border-right: thin solid lighten($color-background-nav, 15%)

					&:last-child
						border-color: transparent

					a
						font-weight: 500
						padding: 5px 6px

					&.disabled
						opacity: .6

					&.active
						a
							color: white

	#search-list
		width: 40%
		height: 100%
		padding: 0
		position: relative

		#hits
			position: relative

		#no-hits
			padding: 10px 15px
			color: $color-text-dark-secondary

		.search-hit
			#search-loading
				visibility: hidden
				background-color: transparent
				font:
					size: 1.5em
					weight: 600
				position: absolute
				top: 0
				left: 0
				right: 0
				bottom: 0
				z-index: $z-index-base + 5
				opacity: 0
				cursor: default
				transition: opacity 50ms ease-in-out
				&.active
					visibility: visible
					opacity: 1

				.spinner
					color: $color-background-nav
					background-color: white
					padding: 0
					width: 20px
					height: 20px
					border-radius: 50%
					position: absolute
					top: 7px
					right: 10px
					span
						padding: 5px
						+pulse

	#search-details
		position: relative
		width: 40%
		border-left: 2px solid darken(white, 3%)

		#search-hit-container
			position: absolute // for custom scrollbars
			width: 100%
			.ps-scrollbar-y-rail
				z-index: 1

		#search-error
			display: none
			margin: 20px auto
			color: $color-danger
			text-align: center

	#error_container.404
		#error-box
			background: none
			box-shadow: none
			width: 80%

	#node-container
		width: 100%
		max-width: 100%

		.node-preview
			max-height: initial

			&.group
				background: white
				.overlay
					display: none
				.node-title
					font-size: 1.8em
					padding-right: 30px
					width: 100%
					+text-overflow-ellipsis
				.backdrop
					opacity: .15

			.node-preview-thumbnail
				max-height: 320px

		.node-children
			&.group
				background-color: white
				position: relative
				z-index: 1

				.list-node-children-item.browse-list
					.list-node-children-item-name
						+text-overflow-ellipsis
						font-size: 1.1em
					.list-node-children-item-meta
						+text-overflow-ellipsis
						padding-right: 20px

						span
							&.free
								font-size: .7em

		.node-details-container
			&.group
				position: initial
			.node-details-description
				max-width: 100%

				p
					margin-bottom: 0
					padding-bottom: 10px

			.node-details-header
				clear: both
				width: 100%
				max-width: 100%
				.node-title
					font-size: 1.7em

			.node-details-meta
				&.header
					clear: both
					width: 100%
					max-width: 100%
					padding: 10px

					.node-details-meta-list
						display: inline-block
						float: right
						font-size: .9em

						.node-details-meta-list-item
							&.status, &.author
								display: none
							&.type, &.length
								padding-top: 10px
							&.access
								padding-top: 5px

				&.footer
					.node-details-meta-list
						.node-details-meta-list-item
							&.status
								display: none
				&.preview
					bottom: initial
					top: 10px
					.node-details-meta-list
						.node-details-meta-list-item
							&.status, &.author, &.date
								display: none

		&.texture
			.texture-title
				font:
					size: 2em
					family: $font-body
				padding: 15px 10px 10px 15px
			.node-row
				background: white

				.node-details-header
					padding:
						left: 15px
						right: 15px
						bottom: 0
					min-height: initial
					.node-title
						font-size: 1.4em

				.node-details-attributes
					font-size: .7em
					padding:
						left: 15px
						right: 15px
						bottom: 10px

					span.sizes
						padding: 0
					span.extra
						padding: 0

				.node-preview.texture
					max-width: 128px

					img.node-preview-thumbnail
						pointer-events: none

				.node-details-meta
					padding: 15px

					.node-details-meta-list
						width: 100%
						flex-wrap: wrap
						margin: 0 auto
						.node-details-meta-list-item
							text-align: center
							margin: 0 auto 0 0
							padding: 5px 0
							font-size: .9em

							&.image.download
								width: 100%
								padding: 5px 0 0 0
								button
									width: 100%

.search-hit
	float: left
	box-shadow: none
	border: thin solid transparent
	border-top-color: darken(white, 8%)
	border-left: 3px solid transparent

	color: $color-background-nav

	width: 100%
	position: relative
	margin: 0
	padding: 7px 10px 7px 10px
	+clearfix

	&:first-child
		border: thin solid transparent
		border-left: 3px solid transparent

	&:hover
		opacity: 1
		text-decoration: none
		cursor: default
		color: darken($color-primary, 20%)

		& .search-hit-name i
			color: darken($color-primary, 20%)

		& .search-hit-thumbnail
			& .search-hit-thumbnail-icon
				transform: translate(-50%, -50%) scale(1.1)

		.search-hit-name
			text-decoration: none
			&:hover
				color: darken($color-primary, 10%)

		.search-hit-thumbnail
			cursor: pointer

			.search-hit-thumbnail-icon
				transform: translate(-50%, -50%) scale(1)

	&:active
		background-color: rgba($color-background, .5)
		opacity: .8
		color: $color-primary
		& .search-hit-name i
			color: $color-primary

	&:focus
		background-color: thin solid rgba($color-primary, .2)

	/* Class that gets added when we click on the item */
	&.active
		background-color: lighten($color-background, 2%)
		border-left: 3px solid $color-primary

		.search-hit-name
			color: darken($color-primary, 10%)

		.search-hit-meta
			span.when
				display: none
			span.context
				display: inline-block

	.search-hit-thumbnail
		position: relative
		float: left
		min-width: $search-hit-width_list * 1.49
		max-width: $search-hit-width_list * 1.49
		height: $search-hit-width_list
		border-radius: 3px
		background: $color-background
		margin-right: 12px
		text-align: center
		overflow: hidden
		+media-xs
			display: none
		+media-sm
			min-width: $search-hit-width_list
			max-width: $search-hit-width_list

		img
			height: $search-hit-width_list
			width: auto


		.pi-video:before, .pi-file:before,
		.pi-group:before
			font-family: 'pillar-font'
		.pi-video:before
			content: '\e81f'
		.pi-file:before
			content: '\e822'
		.pi-group:before
			content: '\e820'

		.search-hit-thumbnail-icon
			position: absolute
			top: 50%
			left: 50%
			transform: translate(-50%, -50%)
			color: white
			// text-shadow: 1px 1px 1px rgba(black, .2), 0 0 50px rgba(black, .3)
			font-size: 1.2em
			transition: none
			color: $color-text-dark-secondary

			.dark
				text-shadow: none
				font-size: 1.3em

	.search-hit-name
		position: relative
		font-size: 1.1em
		color: $color-text-dark-primary
		background-color: initial
		width: initial
		max-width: initial
		+text-overflow-ellipsis
		padding-top: 5px

		&:hover
			cursor: pointer
			text-decoration: underline

		em
			color: darken($color-primary, 15%)
			font-style: normal

	.search-hit-ribbon
		+ribbon
		right: -30px
		top: 5px

		span
			font-size: 60%
			margin: 1px 0
			padding: 2px 35px

	.search-hit-meta
		position: relative
		font-size: .9em
		color: $color-text-dark-secondary
		background-color: initial
		padding: 3px 0 0 0
		text-decoration: none
		+text-overflow-ellipsis

		span
			&.project
				color: $color-text-dark-secondary
				margin-right: 3px
			&.updated
				color: $color-text-dark-hint
			&.status
				font-size: .8em
				color: $color-text-dark-secondary
				border: thin solid $color-text-dark-hint
				padding: 3px 8px
				text-transform: uppercase
				border-radius: 3px
				margin-right: 5px
			&.media, &.node_type
				color: $color-text-dark-secondary
				text-transform: capitalize
				margin: 0 3px

			&.when
				margin: 0 3px
				float: right
				display: block
				+media-lg
					display: block
				+media-md
					display: block
				+media-sm
					display: none
				+media-xs
					display: none

			&.context
				margin: 0
				float: right
				display: none

	&:hover
		cursor: pointer
		.search-hit-name-user
			color: $color-primary

	&.users
		em
			font-style: normal
			color: $color-primary

		.search-hit-name
			font-size: 1.2em

			small
				margin-left: 5px
				color: $color-text-dark-secondary

		.search-hit-roles
			font-size: .9em
			color: $color-text-dark-secondary
			margin-left: 15px




